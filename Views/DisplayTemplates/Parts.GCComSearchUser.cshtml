<div class="input-group">
    <input type="text" class="form-control" id="gccomSearchFor" placeholder="naam of deel van naam">
    <span class="input-group-btn">
        <button class="btn btn-primary" type="button" id="gccomSearchButton">Zoek!</button>
    </span>
</div><!-- /input-group -->

<div id="gccomSearchTopPager">
</div>
<table class="table table-striped table-hover" id="gccomSearchResults">
    <thead>
        <tr>
            <th>Avatar</th>
            <th>Naam</th>
            <th>Aantal gevonden</th>
            <th>Aantal verborgen</th>
        </tr>
    </thead>
    <tbody></tbody>
</table>
<div id="gccomSearchBottomPager">
</div>

    <script type="text/javascript">

        initGlobalcachingPager("gccomSearchTopPager", "gccomSearch");
        initGlobalcachingPager("gccomSearchBottomPager", "gccomSearch");

        function requestgccomSearchPage(page) {
            var resultElementName = "#gccomSearchResults";
            var pagerElementName = ".gccomSearch";

            myApp.showPleaseWait();

            $(resultElementName).find("tr:gt(0)").remove();
            $(pagerElementName).find("li").remove();
            $.ajax({
                type: "POST",
                url: '@Url.Action("Index", "GCComUserSearch", new { area = "Globalcaching" })',
                data: {
                    id: $("#gccomSearchFor").val(),
                    page: page,
                    pageSize: "50",
                    __RequestVerificationToken: '@Html.AntiForgeryTokenValueOrchard()'
                },
                success: function (response) {
                    myApp.hidePleaseWait();

                    //=================
                    //content
                    //=================
                    for (var i = 0; i < response.Users.length; i++) {
                        var line = response.Users[i];
                        // insert after last row!
                        $(resultElementName + ' > tbody:last').append('<tr><td>' + '<img src="' + line.AvatarUrl + '" height="48" width="48"/>' + '</td><td><a href="http://www.geocaching.com/profile/?guid=' + line.PublicGuid + '" target="_blank">' + line.UserName + '</a></td><td>' + line.FindCount + '</td><td>' + line.HideCount + '</td></tr>');
                    }

                    //=================
                    //Pager
                    //=================
                    setupGlobalcachingPage(response.CurrentPage, response.PageCount, response.TotalCount, pagerElementName, "requestgccomSearchPage");
                },
                error: function (data, errorText) {
                    myApp.hidePleaseWait();
                    alert(errorText);
                }
            });
        }

        $('#gccomSearchFor').keypress(function (e) {
            if (e.which == '13') {
                requestgccomSearchPage('1');
            }
        });

        $("#gccomSearchButton").click(function () {
            requestgccomSearchPage('1');
        });
    </script>
